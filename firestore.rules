rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // NOTE: This app uses CUSTOM authentication (not Firebase Auth)
    // All auth is handled client-side with PBKDF2 password hashing
    // Therefore we cannot use request.auth for security rules

    // PRODUCTION SECURITY WARNING:
    // These rules are OPEN to allow custom auth to work.
    // To secure this properly, you should:
    // 1. Migrate to Firebase Authentication, OR
    // 2. Implement Firebase Security Rules with custom claims/tokens, OR
    // 3. Use Firebase Admin SDK server-side with proper authentication

    // For now, allowing read/write for custom auth system to function
    match /{document=**} {
      allow read, write: if true;
    }

    // If you migrate to Firebase Auth in the future, use these rules instead:
    // match /users/{userId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null && request.auth.uid == userId;
    // }
    //
    // match /products/{productId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null;
    // }
    //
    // match /drivers/{driverId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null;
    // }
    //
    // match /orders/{orderId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null;
    // }
    //
    // match /assignments/{assignmentId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null;
    // }
    //
    // match /sales/{saleId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null;
    // }
    //
    // match /stock_transfers/{transferId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null;
    // }
  }
}
